# ДЗЕН

## 1. Тема и целевая аудитория

Выбран сервис dzen

Дзен — российская блог-платформа для создания и просмотра контента

Аудитория:
- MAU 79M [7] и [8]
- DAU 31M [9]

По странам [8]:
1. Россия - 95,43% - 75,3М
2. Беларусь - 1,14% - 0,9М
3. Казахстан - 0,55% - 0,4М
4. Украина - 0,44% - 0,35М

Ключевой функционал - просмотр и реакция на посты

Ключевое продуктовое решение - весь контент создаётся пользователями

Выделен следующий функционал MVP:
- Поиск (по постам, авторам)
- Чтение постов
- Написание постов с вложением картинок
- Комментарии
- Авторизация
+ Подписки
+ Рекомендации
+ Монетизация

## 2. Расчет нагрузки

Анализ трафика:

- 100 млн пользователей [1]
- 2,7 млн постов ежемесячно [2]
- 100к пользователей пишут ежемесячно [3]
- 500к коментариев ежедневно, но тогда DAU был 20М, а сейчас 31М => 750к [4]
- 5 млрд часов проведено на сайте за год (2024) [6]
- добавляется 1 млн авторов ежегодно [6]
- время пользователей : 40% видео, 60% текстов [5]

Средний размер хранилища пользователя:
- 1,5 Мб фотография

  вычислил путём среднего от 10 фотографий (не иконок которые меньше весят). Получили: (406 + 6100 + 143 + 120 + 4400 + 108 + 222 + 380 + 1400 + 543)кб / 10 = 13824 кб / 10 ~= 1,5 Мб

- 3 Кб Информация о пользователе
  - 140 символов * 2 байта = 280 байт на имя
  - 300 * 2 = 600 байт на описание
  - 1 Кб на ссылки (свой сайт, на соцсети)

Действия пользователя:

- 1 раз в день пользователь заходит на главную. При нажатии на интересный пост открывается новая вкладка => 2 раз заходить на главную не надо.
- В среднем пользователь проводит 18 минут за чтением статей (5 млрд часов * 0.63 процент чтения статей / 365 дней / 30млн пользователей ежедневно * 60 минут в часу)
- По статистике канала "Упал поднялся" Статью читают 1,5 минуту. Значит за день пользователь читает 13 статей
- Ежемесячно 100 000 авторов пишут 2,7 млн постов. Примерно 27 пост на автора или 0,9 поста в день. При MAU 79M в среднем пользователь пишет 0,034 постов в месяц или 0,001 пост в день
- в день оставляют 750к коментариев значит при DAU 31M пользователь пишет 0,025 коментариев в день
- 1 млн авторов регестрируются ежегодно. Значит в день регестрируются 2,8к пользователей. 0,00009 пользователей регестрируются
- По статистики zenstats на 50 самый больших каналов по подписчикам подписалось за месяц 500к. Прогназирую 5М подписок ежемесячно. Значит при MAU 79M каждый пользовать сделал 0,07 подписок в месяц или 0,002 подписки в день
- По рекомендациям есть 10k rps
- По монетизации ничего пока нету :(

Разбивка по данным:
- Всего пользователей 100М => 1,503 Мб * 100 000 000 = 144 Тб
  - 1,5 Мб * 100 000 000 = 143 Тб - эти данные завышены так как не у всех пользователей есть аватарки. Серевис предоставляет 3 вида аватарок (белый человечек, абстракция, животные ии (штук 20))
  - 0,003 Мб * 100 000 000 = 300 Гб

  Я взял для анализа коментарии следующей статьи https://dzen.ru/a/aMh3qNPKJCJqDMDH - 396 коментаиев из которых ~= 105 с автарками. Сделаем погрешность и будет считать что каждый третий пользователь имеет аватарку (33,4 * 1,503 + 66,6 * 0,003) * 1 000 000 = 48 Тб данных
- Посты:
  - в 2023 году 20 млн постов и 14 млн статей. Это на 40% больше чем в прошлом году => В прошлом году было 34 * 0,6 = 20 млн постов
  - в 2022 году количество контента вырасло в 3 раза => В прошлом году было 20 / 3 ~= 8 млн постов
  - С 2015 - 2021 (6 лет) = 8 * 6 = 24. Т.к. за 6 лет произошёл рост аудитории сократим количество постов до 20 млн.
  - Итого: 34 + 20 + 8 + 20 = 82 млн постов
  - Взял 50 постов на zenstat и вычислил среднее время = 4 минуты это примерно 4000 символов [11] ~= 8кб (uft8)
  - 8кб * 82млн = 656 Гб
  - TODO: просчитать вес картинок в посте - взять 10 постов и посчитать количство картинок и и средний вес
- Коментарии
  - В 2020 году пользователи писали 500к коментариев => 5 лет * 365 дней * 500к ~= 1 млрд коментариев
  - В среднем коментарий весит = TODO 

Rps и сетевая нагрузка
- Лента постов
  - (307 + 211 + 403 + 882 + 520 + 5 + 93) / 7 = 2421 кб / 7 = 345 кб на шапку поста
  - 0,4 кб (200 символов) на короткое вступление
  - 1кб на пост (ссылки на аватарку и шапку поста, имя пользователя, время чтения)
  - Размер аватарки автора поста ~= 2кб
  - Личный опыт - листается порядка 30 постов на главной => (345 + 2) * 30 = 10 мб картиной
  - 31 000 000 / 86 400 = 360 rps в среднем
  - 360 * 3 = 1080 rps в пике => 1080 rps * 30 постов * 1кб = 32 мб/с в пике
  - 31 000 000 * 30 постов * 1 кб = 930 гб трафика в день
- Пост
  - 8 кб текст поста
  - картинка в посте весит 200-250кб ~= 225кб
  - В посте в среднем 5-6 картинок
  - (13 статей в день * 31 000 000 DAU) / 86 400 = 4 700 rps в среднем
  - 4 700 * 3  = 14 000 rps в пике => 14 000 * 8кб = 112 мб/c
  - 31 000 000 DAU * 13 статей в день * 8 кб текста = 3,2 Тб трафика в день
- Написание постов
  - В день 2 700 000 постов в месяц / 30 дней = 90 000 => 90 000 постов в день / 86 400 секунд = 1 rps в среднем
  - В пике 1 rps * 3 = 3 rps в пике => 3 * 8 kb => 24 kb/s
  - 2 700 000 * 8кб = 21 Гб трафика в день
- Коментарии
  - 750к коментариев в день * 30 дней = 22 500 000 коментариев в месяц. 22,5 коментариев / 2,7 млн постов = 8 коментариев на пост
- Рекомендации (10тыс rps)
  - При просмотре статьи в конце предоставляют 4 поста на выбор, после идёт следующий пост ~= 4кб
  - За раз на стену приходит 7 рекомендованных постов ~= 7кб
  - В пике 10 000 * 3 = 30 000 rps => 30 000 * 7 кб = 210 мб/с
  - 10 000 rps * 86 400 секунд в дне * 7 кб ответ = 6,4 Тб трафика в день
- Выдача картинок
  - 500 + 800 + 140 = 1440 кб картинки рекомендованных постов

## Ссылки

1. https://www.youtube.com/watch?v=IXEde53P0Jg - 1:38
2. https://zenstat.ru/stat/posts/?search=&sort=views&order=asc&offset=0&limit=50&type_post=card&date_from=2025-08-06&date_to=2025-09-04&period=30&post_text=&post_text_minus=&views_min=&views_max=&channel_subscribers_min=&channel_subscribers_max=&channel_publications_30days=&fast_load=1
3. https://dzen.ru/about
4. https://habr.com/ru/news/532670/
5. https://dzen.ru/about/itogi2023
6. https://dzen.ru/itogi-2024
7. https://corp.vkcdn.ru/media/files/RUS_Results_Presentation_H1_2025.pdf - 7 стр
8. https://hypestat.com/info/dzen.ru
9. https://dzen.ru/about/careers


[1]: https://www.youtube.com/watch?v=IXEde53P0Jg
[2]: https://zenstat.ru/stat/posts/?search=&sort=views&order=asc&offset=0&limit=50&type_post=card&date_from=2025-08-06&date_to=2025-09-04&period=30&post_text=&post_text_minus=&views_min=&views_max=&channel_subscribers_min=&channel_subscribers_max=&channel_publications_30days=&fast_load=1
[3]: https://dzen.ru/about
[4]: https://habr.com/ru/news/532670/
[5]: https://dzen.ru/about/itogi2023
[6]: https://dzen.ru/itogi-2024
[7]: https://corp.vkcdn.ru/media/files/RUS_Results_Presentation_H1_2025.pdf
[8]: https://hypestat.com/info/dzen.ru
[9]: https://dzen.ru/about/careers
[10]: https://dzen.ru/a/ZYWi7bChZQJnLS9d
[11]: https://dzen.ru/a/aH3qbkqCAA5vD3ht
